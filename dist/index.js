/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./server/index.js":
/*!*************************!*\
  !*** ./server/index.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _src_config_user_def_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/config/user.def.js */ \"./server/src/config/user.def.js\");\n/* harmony import */ var _src_config_user_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/config/user.config.js */ \"./server/src/config/user.config.js\");\n/* harmony import */ var _src_routes_index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./src/routes/index.js */ \"./server/src/routes/index.js\");\n/* harmony import */ var _src_routes_catalog_routes_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./src/routes/catalog.routes.js */ \"./server/src/routes/catalog.routes.js\");\n/* harmony import */ var _src_routes_product_routes_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./src/routes/product.routes.js */ \"./server/src/routes/product.routes.js\");\n/* harmony import */ var _src_routes_flds_user_routes_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./src/routes/flds_user.routes.js */ \"./server/src/routes/flds_user.routes.js\");\n/* harmony import */ var cookie_parser__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! cookie-parser */ \"cookie-parser\");\n/* harmony import */ var cookie_parser__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(cookie_parser__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var body_parser__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! body-parser */ \"body-parser\");\n/* harmony import */ var body_parser__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(body_parser__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(url__WEBPACK_IMPORTED_MODULE_10__);\n\r\n\r\n\r\n// import bodyParser from 'body-parser';\r\n// import { URL } from 'url';\r\n// global.userConfig = require(\"./src/config/user.config.js\");\r\n// console.log(global.userConfig);\r\n\r\n// 匯入json file 方式1.\r\n\r\n// console.log(userConfig);\r\n// Test code.\r\n// import {service, config02}  from './src/config/user.config01.js';\r\n// console.log(service);\r\n// console.log(service.web);\r\n// console.log(service.reserve1);\r\n// console.log(config02);\r\n\r\n// //  匯入json file 方式2. 會產生 ExperimentalWarning.\r\n// // (node:19044) ExperimentalWarning: Importing JSON modules is an experimental feature and might change at any time\r\n// // (Use `node --trace-warnings ...` to show where the warning was created)\r\n// import userConfig from './src/config/user.config.json' assert {type: 'json'};\r\n// console.log(userConfig);\r\nglobal.userConfig = _src_config_user_config_js__WEBPACK_IMPORTED_MODULE_3__;\r\n// Test code global.\r\n// global.studentName = 'Kyle';\r\n// console.log(global);\r\n\r\n\r\n  //Import routes for \"catalog\" area of site\r\n  //Import routes for \"catalog\" area of site\r\n// const productRouter = require('./src/routes/product.routes.js');  //Import routes for \"product\" area of site\r\n// const locationRouter = require('./src/routes/location.routes.js');  //Import routes for \"product\" area of site\r\n// // const flds_bindRouter = require('./src/routes/flds_bind.routes.js');  //Import routes for \"product\" area of site\r\n// const flds_userRouter = require('./src/routes/flds_user.routes.js');  //Import routes for \"product\" area of site\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst __filename = (0,url__WEBPACK_IMPORTED_MODULE_10__.fileURLToPath)(\"file:///D:/PRG/nodejs/Micron/express-es6-sample/server/index.js\");\r\nconst __dirname = (0,path__WEBPACK_IMPORTED_MODULE_1__.dirname)(__filename);\r\n\r\n//Express web module\r\nconst app = express__WEBPACK_IMPORTED_MODULE_0___default()();\r\n// app.locals.moment = require('moment');\r\n\r\n//Setup middleware\r\n// app.use(bodyParser.json());\r\n// app.use(bodyParser.urlencoded({ extended: false }));\r\n// app.use(urlencoded({ extended: true }));     /* bodyParser.urlencoded() is deprecated */\r\n\r\n// app.use(express.static(path.join(__dirname, 'public')));\r\n// app.use(static(join(__dirname, 'node_modules')));\r\n\r\n// console.log( __dirname );\r\n// console.log( __filename );\r\n// console.log( cookieParser );\r\n// console.log( bodyParser.urlencoded() );\r\n\r\n// app.use(express.urlencoded({ extended: false }));\r\napp.use(express__WEBPACK_IMPORTED_MODULE_0___default().urlencoded({ extended: true }));\r\napp.use(cookie_parser__WEBPACK_IMPORTED_MODULE_8___default()());\r\n// app.use(bodyParser.json());\r\napp.use(express__WEBPACK_IMPORTED_MODULE_0___default()[\"static\"](path__WEBPACK_IMPORTED_MODULE_1___default().join(__dirname, 'public')));\r\n\r\napp.use(express__WEBPACK_IMPORTED_MODULE_0___default().json());\r\n\r\n//middleware\r\napp.use('/', _src_routes_index_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\r\napp.use('/catalog/user', _src_routes_flds_user_routes_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"]);  // Add product routes to middleware chain.\r\n// // app.use('/catalog/flds_bind', flds_bindRouter);  // Add product routes to middleware chain.\r\n// app.use('/catalog/location', locationRouter);  // Add location routes to middleware chain.\r\napp.use('/catalog/product', _src_routes_product_routes_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);  // Add product routes to middleware chain.\r\n\r\n// 最後放'/catalog'才不會被攔截\r\n// app.use('/catalog', catalogRouter);  // Add catalog routes to middleware chain.\r\n\r\n\r\n// catch 404 and forward to error handler\r\napp.use(function (req, res, next) {\r\n    let msg = {\r\n        service: _src_config_user_def_js__WEBPACK_IMPORTED_MODULE_2__.service.web,\r\n        code: 404,\r\n        msg: \"url not found ......\",\r\n        data:[{msg: req.url}]\r\n    };\r\n    res.status(404);\r\n    res.json(msg);\r\n});\r\n\r\n\r\napp.set('port', process.env.PORT || 3000);\r\n\r\nconst server = app.listen(app.get('port'), function () {\r\n    console.log('Express server listening on port ' + server.address().port);\r\n});\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/index.js?");

/***/ }),

/***/ "./server/src/comm/logger.js":
/*!***********************************!*\
  !*** ./server/src/comm/logger.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Controllerlogger\": () => (/* binding */ Controllerlogger),\n/* harmony export */   \"logErr\": () => (/* binding */ logErr),\n/* harmony export */   \"rfidlogger\": () => (/* binding */ rfidlogger)\n/* harmony export */ });\n/* harmony import */ var log4js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! log4js */ \"log4js\");\n/* harmony import */ var log4js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(log4js__WEBPACK_IMPORTED_MODULE_0__);\n\r\n\r\n// logger.trace('Some trace messages')\r\n// logger.debug('Some debug messages')\r\n// logger.info('Some info messages')\r\n// logger.warn('Some warn messages')\r\n// logger.error('Some error messages')\r\n// logger.fatal('Some fatal messages')\r\n\r\n\r\nlog4js__WEBPACK_IMPORTED_MODULE_0___default().configure({\r\n    appenders: {\r\n        std: { type: \"stdout\", level: \"all\", layout: { type: \"basic\", } },\r\n        std1: { type: \"stdout\", level: \"all\", layout: { type: \"messagePassThrough\", } },\r\n        file: {\r\n            type: \"file\",\r\n            filename: \"./log/controller.log\",\r\n            maxLogSize: 20000000, // 20 MB\r\n            backups: 10, //10 copies\r\n            encoding: \"utf-8\"\r\n        },\r\n        moverfid: {\r\n            type: \"file\",\r\n            filename: \"./log/moverfid.log\",\r\n            maxLogSize: 200000, // 0.2MB\r\n            backups: 2, //2 copies\r\n            encoding: \"utf-8\"\r\n        },\r\n        al510lowdata: {\r\n            type: \"file\",\r\n            filename: \"./log/al510lowdata.log\",\r\n            maxLogSize: 4000000, // 4 MB\r\n            backups: 20, //2 copies\r\n            encoding: \"utf-8\"\r\n        },\r\n        LogErr: {\r\n            type: \"file\",\r\n            filename: \"./log/LogErr.log\",\r\n            maxLogSize: 4000000, // 4 MB\r\n            backups: 20, //2 copies\r\n            encoding: \"utf-8\"\r\n        }\r\n    },\r\n    categories: {\r\n        default: { appenders: [\"std\"], level: \"all\" },\r\n        RFID: { appenders: [\"std\", \"file\"], level: \"all\" },\r\n        Controller: { appenders: [\"std\", \"file\"], level: \"all\" },\r\n        Moverfid: { appenders: [\"std\", \"moverfid\"], level: \"info\" },\r\n        Al510lowdata: { appenders: [\"std\", \"al510lowdata\"], level: \"info\" },\r\n        LogErr: { appenders: [\"std\", \"LogErr\"], level: \"info\" }\r\n    }\r\n\r\n})\r\n\r\nconst rfidlogger = log4js__WEBPACK_IMPORTED_MODULE_0___default().getLogger('RFID');\r\nconst Controllerlogger = log4js__WEBPACK_IMPORTED_MODULE_0___default().getLogger('Controller');\r\nconst logErr = log4js__WEBPACK_IMPORTED_MODULE_0___default().getLogger('LogErr');\r\n\r\n// export { rfidlogger, Controllerlogger, logErr };\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/comm/logger.js?");

/***/ }),

/***/ "./server/src/config/db.config.js":
/*!****************************************!*\
  !*** ./server/src/config/db.config.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"dbconfig\": () => (/* binding */ dbconfig),\n/* harmony export */   \"dbconfig1\": () => (/* binding */ dbconfig1),\n/* harmony export */   \"dbconfig2\": () => (/* binding */ dbconfig2),\n/* harmony export */   \"dbconfig3\": () => (/* binding */ dbconfig3)\n/* harmony export */ });\n\r\n// ES6 modules – learn how to write modular JavaScript code.\r\n// Server\r\nconst dbconfig = {\r\n    HOST : \"localhost\",\r\n    USER : \"root\",\r\n    PASSWORD : \"q45101524Q\",\r\n    DB : \"micron_dev01\",\r\n    PORT : \"3306\"\r\n}\r\n\r\n// EX38-windows\r\nconst dbconfig1 = {\r\n    HOST : \"localhost\",\r\n    USER : \"root\",\r\n    PASSWORD : \"12345678\",\r\n    DB : \"micron_dev01\",\r\n    PORT : \"3306\"\r\n}\r\n\r\n// VMplayer\r\nconst dbconfig2 = {\r\n    HOST : \"192.168.249.106\",\r\n    USER : \"root\",\r\n    PASSWORD : \"123456\",\r\n    DB : \"micron_dev01\",\r\n    PORT : \"3306\"\r\n}\r\n\r\n// VMplayer\r\nconst dbconfig3 = {\r\n    HOST : \"192.168.249.114\",\r\n    USER : \"root\",\r\n    PASSWORD : \"123456\",\r\n    DB : \"micron_dev01\",\r\n    PORT : \"3306\"\r\n}\r\n\r\n// export const HOST = \"localhost\";\r\n// // export const HOST = \"192.168.248.34\";\r\n// // export const HOST = \"127.0.0.1\";\r\n// export const USER = \"root\";\r\n// // export const PASSWORD = \"12345678\";\r\n// export const PASSWORD = \"q45101524Q\";\r\n// export const DB = \"micron_dev01\";\r\n// // default:3306, 5080\r\n// export const PORT = \"3306\";\r\n\r\n// // // Database VMware Workstation 12 Player test.\r\n// // // export const HOST = \"localhost\";\r\n// // // export const HOST = \"192.168.248.34\";\r\n// export const HOST = \"192.168.249.106\";\r\n// export const USER = \"root\";\r\n// // // export const PASSWORD = \"12345678\";\r\n// // // export const PASSWORD = \"q45101524Q\";\r\n// export const PASSWORD = \"123456\";\r\n// export const DB = \"micron_dev01\";\r\n// // // default:3306, 5080\r\n// export const PORT = \"3306\";\r\n\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/config/db.config.js?");

/***/ }),

/***/ "./server/src/config/user.config.js":
/*!******************************************!*\
  !*** ./server/src/config/user.config.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"flds_comp\": () => (/* binding */ flds_comp),\n/* harmony export */   \"flds_dept\": () => (/* binding */ flds_dept),\n/* harmony export */   \"flds_user\": () => (/* binding */ flds_user),\n/* harmony export */   \"location_type\": () => (/* binding */ location_type),\n/* harmony export */   \"password\": () => (/* binding */ password),\n/* harmony export */   \"reserve1\": () => (/* binding */ reserve1),\n/* harmony export */   \"reserve2\": () => (/* binding */ reserve2),\n/* harmony export */   \"reserve3\": () => (/* binding */ reserve3)\n/* harmony export */ });\n\r\nconst flds_comp = \"micron_dev01\";\r\nconst flds_dept = \"dept0001\";\r\nconst flds_user = \"user0001\";\r\nconst password = \"q45101524Q\";\r\nconst location_type = '1100';\r\nconst reserve1 = \"reserve1\";\r\nconst reserve2 = \"reserve2\";\r\nconst reserve3 = \"reserve3\";\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/config/user.config.js?");

/***/ }),

/***/ "./server/src/config/user.def.js":
/*!***************************************!*\
  !*** ./server/src/config/user.def.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"config02\": () => (/* binding */ config02),\n/* harmony export */   \"service\": () => (/* binding */ service)\n/* harmony export */ });\nconst service = {\r\n        \"sys\" : 0,\r\n        \"web\" : 1,\r\n        \"db\" : 2,\r\n        \"other\" : 3,\r\n        \"reserve1\" : 4\r\n    };\r\n\r\nconst config02 = {\r\n        flds_comp : \"abba_dev04\",\r\n        flds_dept : \"dept0001\",\r\n        flds_user : \"user0001\",\r\n        password : \"q45101524Q\",\r\n        location_type : \"1100\",\r\n        reserve1 : \"reserve1\",\r\n        reserve2 : \"reserve2\",\r\n        reserve3 : \"reserve3.....\"\r\n    };\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/config/user.def.js?");

/***/ }),

/***/ "./server/src/controllers/flds_user.controller.js":
/*!********************************************************!*\
  !*** ./server/src/controllers/flds_user.controller.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"create\": () => (/* binding */ create),\n/* harmony export */   \"deleteAll\": () => (/* binding */ deleteAll),\n/* harmony export */   \"deleteID\": () => (/* binding */ deleteID),\n/* harmony export */   \"findAll\": () => (/* binding */ findAll),\n/* harmony export */   \"findOne\": () => (/* binding */ findOne),\n/* harmony export */   \"findSearch\": () => (/* binding */ findSearch),\n/* harmony export */   \"update\": () => (/* binding */ update)\n/* harmony export */ });\n/* harmony import */ var async__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! async */ \"async\");\n/* harmony import */ var async__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(async__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ \"moment\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var util_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! util/util.js */ \"util/util.js\");\n/* harmony import */ var util_util_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(util_util_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _models_flds_user_model_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/flds_user.model.js */ \"./server/src/models/flds_user.model.js\");\n/* harmony import */ var _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../comm/logger.js */ \"./server/src/comm/logger.js\");\n/* harmony import */ var _util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/utilFunction.js */ \"./server/src/util/utilFunction.js\");\n/* harmony import */ var _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../config/user.def.js */ \"./server/src/config/user.def.js\");\n\r\n\r\n\r\n\r\n\r\n// import { Controllerlogger as Logger } from '../comm/logger.js';\r\n\r\n\r\n\r\n\r\n// console.log(service);\r\n\r\n\r\nlet Flds_table = 'flds_user';\r\n// Create and Save a new Flds_user\r\nconst create = async function(req, res){\r\n  // Validate request\r\n  console.log('create query = %s', req.query);\r\n  console.log('create body = %s', req.body);\r\n  console.log('create params = %s', req.params);\r\n\r\n  if (!req.body) {\r\n    let msg = {\r\n      message: \"Content can not be empty!\"\r\n    };\r\n    res.status(400);\r\n    res.json(msg);\r\n    return ;\r\n  }\r\n\r\n  try {\r\n    const flds_user = new _models_flds_user_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\r\n      user_id : req.body.user_id,\r\n      name : req.body.name,\r\n      state: req.body.state,\r\n      deptid : req.body.deptid,\r\n      password : req.body.password,\r\n    });\r\n    console.log('Flds_user = %s', flds_user);\r\n\r\n    // let Flds_comp = global.userConfig.flds_comp;\r\n    const TABLE_NAME = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n\r\n      // 第二種方式同步語法\r\n      const result2 = await _models_flds_user_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].create(flds_user, TABLE_NAME);\r\n      console.log('result2');\r\n      console.log(result2);\r\n      // res.json(result2);\r\n      let msgret = {\r\n        service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n        code: 200,\r\n        msg: `Flds_user creat successfully  user_id: ${result2.user_id}`,\r\n        data: []\r\n      };\r\n      res.json(msgret);\r\n\r\n  } catch (error) {\r\n    // console.log(error.code);\r\n    res.status(500);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n\r\n    let logerfunc = `export const create()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n    // LogErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerrfunc, logerrmsg);\r\n\r\n  }\r\n\r\n}\r\n\r\n// 同步功能實現 async/await/Promise .\r\n// 此(函式表達式)完全可以被箭頭函式取代\r\n// export const findAll = async function(req, res){\r\n// (函式表達式)完全可以被箭頭函式取代(req, res) =>\r\nconst findAll = async (req, res) => {\r\n// export async function findAll(req, res){\r\n  console.log('findAll query = %s', req.query);\r\n  console.log('findAll body = %s', req.body);\r\n  console.log('findAll params = %s', req.params);\r\n  // let table = 'products';\r\n  // const promise1 = await Flds_user.getAll(table);\r\n  // console.log('promise1');\r\n  // console.log(promise1);\r\n  // // res.json(promise1);\r\n\r\n  // let table1 = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n  // // 跨不同資料庫+table, #RFID.資料庫代號=公司代號\r\n  // console.log('table1: %s', table1);\r\n\r\n  // table = 'Flds_user_tables';\r\n  // let table = `${global.userConfig.flds_comp}.flds_user`;\r\n  // 跨不同資料庫+table, #RFID.資料庫代號=公司代號\r\n  let table = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n  console.log('table: %s', table);\r\n\r\n  try {\r\n    const promise2 = await _models_flds_user_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getAll(table);\r\n    // console.log('promise2');\r\n    // console.log(promise2);\r\n    // res.json(promise2);\r\n    if((0,util_util_js__WEBPACK_IMPORTED_MODULE_2__.isNullOrUndefined)(promise2[0])){\r\n      res.status(200);\r\n      let msgret = {\r\n        service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n        code: 404,\r\n        msg: `Flds_user Not find list.`,\r\n        data: []\r\n      };\r\n      res.json(msgret);\r\n      return ;\r\n    }\r\n\r\n    const result = promise2.map(function(row){\r\n      // return Object.assign({}, row, { createstamp: moment(row.createstamp).format('YYYY-MM-DD HH:mm:ss'),  updatetime: moment(row.updatetime).format('YYYY-MM-DD HH:mm:ss') });\r\n      return Object.assign({}, row, { createtime: (0,_util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(row.createtime),  updatetime: (0,_util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(row.updatetime) });\r\n    });\r\n\r\n    res.status(200);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n      code: 200,\r\n      msg: `flds_user findAll successfully....`,\r\n      data: result\r\n    };\r\n    res.json(msgret);\r\n    console.log(msgret);\r\n\r\n  } catch (error) {\r\n    // console.log(error.code);\r\n    res.status(500);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n\r\n    let logerfunc = `export const findAll()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n    // LogErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerrfunc, logerrmsg);\r\n  }\r\n}\r\n\r\n\r\n// 同步功能實現 async/await/Promise .\r\n// export asyncfunction findSearch(req, res) {\r\nconst findSearch = async function(req, res){\r\n  console.log('findSearch query = %s', req.query);\r\n  console.log('findSearch body = %s', req.body);\r\n  console.log('findSearch params = %s', req.params);\r\n\r\n  // let table = 'products';\r\n  // const promise1 = await Flds_user.getAll(table);\r\n  // console.log('promise1');\r\n  // console.log(promise1);\r\n  // // res.json(promise1);\r\n  try {\r\n    // table = 'Flds_user_tables';\r\n    // let table = `${global.userConfig.flds_comp}.flds_user`;\r\n    // 跨不同資料庫+table, #RFID.資料庫代號=公司代號\r\n    let table = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n    console.log('table: %s', table);\r\n    const result1 = await _models_flds_user_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findSearch(table, req.query);\r\n    // const result1 = await Flds_user.getAll(table);\r\n    console.log('result1');\r\n    console.log(result1);\r\n    // res.json(promise2);\r\n\r\n    if((0,util_util_js__WEBPACK_IMPORTED_MODULE_2__.isNullOrUndefined)(result1[0])){\r\n      res.status(200);\r\n      let msgret = {\r\n        service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n        code: 404,\r\n        msg: `Flds_user Not find list.`,\r\n        data: []\r\n      };\r\n      res.json(msgret);\r\n      return ;\r\n    }\r\n\r\n    const result = result1.map(function(row){\r\n      // return Object.assign({}, row, { createstamp: moment(row.createstamp).format('YYYY-MM-DD HH:mm:ss'),  updatetime: moment(row.updatetime).format('YYYY-MM-DD HH:mm:ss') });\r\n      return Object.assign({}, row, { createtime: (0,_util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(row.createtime),  updatetime: (0,_util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(row.updatetime) });\r\n    });\r\n    res.status(200);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n      code: 200,\r\n      msg: `Flds_user findSearch successfully.`,\r\n      data: result\r\n    };\r\n    res.json(msgret);\r\n\r\n  } catch (error) {\r\n\r\n    res.status(500);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n    // Logger.info('msgret = %s', msgret);\r\n\r\n    let logerfunc = `export const findSearch()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n  }\r\n\r\n}\r\n\r\n// Find a single Flds_user by Id\r\n// export asyncfunction findOne(req, res) {\r\nconst findOne = async function(req, res){\r\n  console.log('Flds_user findOne query = %s', req.query);\r\n  console.log('Flds_user findOne body = %s', req.body);\r\n  console.log('Flds_user findOne params = %s', req.params);\r\n  // JSON.stringify(shelfrecord)\r\n  // let Flds_comp = global.userConfig.flds_comp;\r\n  const TABLE_NAME = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n\r\n  try {\r\n      let result1 = await _models_flds_user_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findById(req.params.id, TABLE_NAME);\r\n      // console.log('result');\r\n      // console.log(result);\r\n\r\n      if( (0,util_util_js__WEBPACK_IMPORTED_MODULE_2__.isNullOrUndefined)(result1[0]) )\r\n      {\r\n        let msgret = {\r\n          service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n          code: 404,\r\n          msg: `Not found user_id: ${req.params.id}`,\r\n          data: []\r\n        };\r\n\r\n        // 請求已成功處理，但未返回任何內容\r\n        res.status(200);\r\n        res.json(msgret);\r\n        _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', msgret);\r\n        return ;\r\n      }\r\n\r\n      const result = result1.map(function(row){\r\n        // return Object.assign({}, row, { createstamp: moment(row.createstamp).format('YYYY-MM-DD HH:mm:ss'),  updatetime: moment(row.updatetime).format('YYYY-MM-DD HH:mm:ss') });\r\n        return Object.assign({}, row, { createtime: (0,_util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(row.createtime),  updatetime: (0,_util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(row.updatetime) });\r\n      });\r\n\r\n      let msgret = {\r\n        service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n        code: 200,\r\n        msg: `Flds_user findOne:  ${req.params.id} successfully.`,\r\n        data: result\r\n      };\r\n      res.json(msgret);\r\n      console.log(msgret);\r\n      // Logger.info('msgret = %s', JSON.stringify(msgret));\r\n      // Logger.info('msgret = %s', msgret);\r\n\r\n  } catch (error) {\r\n    // console.log(error.code);\r\n    res.status(500);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n    // Logger.info('msgret = %s', msgret);\r\n\r\n    let logerfunc = `export const findOne()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n  }\r\n}\r\n\r\n// Update a flds_user identified by the id in the request\r\n// export asyncfunction update(req, res) {\r\n// export const update = async function(req, res){\r\nconst update = async (req, res) => {\r\n  console.log('update query = %s', req.query);\r\n  console.log('update body = %s', req.body);\r\n  console.log('update params = %s', req.params);\r\n\r\n  try {\r\n      const flds_user = new _models_flds_user_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\r\n        user_id : req.params.id,\r\n        name : req.body.name,\r\n        state: req.body.state,\r\n        deptid : req.body.deptid,\r\n        password : req.body.password,\r\n      });\r\n\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      const TABLE_NAME = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n      const result = await _models_flds_user_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateById((req.params.id), flds_user, TABLE_NAME);\r\n      // console.log(result);\r\n\r\n      // // if(result.result === 'not_found')\r\n      if( (0,util_util_js__WEBPACK_IMPORTED_MODULE_2__.isNullOrUndefined)(result[0]) )\r\n      {\r\n        let msgret = {\r\n          service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n          code: 404,\r\n          msg: `Not found id: ${req.params.id}`,\r\n          data: []\r\n        };\r\n\r\n        res.status(200);\r\n        res.json(msgret);\r\n        _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n        // Logger.info('msgret = %s', msgret);\r\n\r\n        let logerfunc = `export const update()`;\r\n        let logermsg = `${JSON.stringify(msgret)}`;\r\n        _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n      }\r\n      else\r\n      {\r\n        let msgret = {\r\n          service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n          code: 200,\r\n          msg: `Flds_user updateById user_id: ${flds_user.user_id} successfully.`,\r\n          data: []\r\n        };\r\n        res.json(msgret);\r\n      }\r\n\r\n  } catch (error) {\r\n    // console.log(error.code);\r\n    res.status(500);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n    // Logger.info('msgret = %s', msgret);\r\n\r\n    let logerfunc = `export const create()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n  }\r\n}\r\n\r\n// Delete a Flds_user with the specified id in the request\r\n// export asyncfunction deleteID(req, res) {\r\nconst deleteID = async function(req, res){\r\n  console.log('delete query = %s', req.query);\r\n  console.log('delete body = %s', req.body);\r\n  console.log('delete params = %s', req.params);\r\n  // JSON.stringify(req.params.id)\r\n\r\n  try {\r\n    // let Flds_comp = global.userConfig.flds_comp;\r\n    const TABLE_NAME = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n    const result1 = await _models_flds_user_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].remove(req.params.id, TABLE_NAME);\r\n    // const result = await Product.findByPn(req.params.id);\r\n    // console.log('result1:');\r\n    // console.log(result1);\r\n\r\n    // if(result1.result === 'not_found'){\r\n    if( (0,util_util_js__WEBPACK_IMPORTED_MODULE_2__.isNullOrUndefined)(result1[0]) ) {\r\n      let msgret = {\r\n        service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n        code: 404,\r\n        msg: `Delete not found id: ${req.params.id}`,\r\n        data: []\r\n      };\r\n\r\n      res.status(200);\r\n      res.json(msgret);\r\n      _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n      // Logger.info('msgret = %s', msgret);\r\n\r\n      let logerfunc = `export const deleteID()`;\r\n      let logermsg = `${JSON.stringify(msgret)}`;\r\n      _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n    }\r\n    else\r\n    {\r\n      let msgret = {\r\n        service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n        code: 200,\r\n        msg: `deleteOne successfully user_id: ${req.params.id}`,\r\n        data: []\r\n      };\r\n      res.json(msgret);\r\n    }\r\n\r\n  } catch (error) {\r\n\r\n    res.status(500);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n    // Logger.info('msgret = %s', msgret);\r\n\r\n    let logerfunc = `export const create()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n  }\r\n\r\n}\r\n\r\n// Delete all Flds_user from the database.\r\n// export asyncfunction deleteAll(req, res) {\r\nconst deleteAll = async function(req, res){\r\n  console.log('delete query = %s', req.query);\r\n  console.log('delete body = %s', req.body);\r\n  console.log('delete params = %s', req.params);\r\n\r\n  try {\r\n\r\n    // let Flds_comp = global.userConfig.flds_comp;\r\n    const TABLE_NAME = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n    const result1 = await _models_flds_user_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].removeAll(TABLE_NAME);\r\n    console.log(result1);\r\n\r\n    // Product.removeAll((err, data) => {\r\n    //   if (err)\r\n    //     res.status(500).send({\r\n    //       message:\r\n    //         err.message || \"Some error occurred while removing all Products.\"\r\n    //     });\r\n    //   else res.send({ message: `All Products were deleted successfully!` });\r\n    // });\r\n    // res.send(req);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n      code: 200,\r\n      msg: `Deleted ${result1.affectedRows} successfully `,\r\n      data: []\r\n    };\r\n    res.status(200);\r\n    res.json(msgret);\r\n\r\n  } catch (error) {\r\n    // console.log(error.code);\r\n    res.status(200);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n    // Logger.info('msgret = %s', msgret);\r\n\r\n    let logerfunc = `export const deleteAll()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n  }\r\n\r\n}\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/controllers/flds_user.controller.js?");

/***/ }),

/***/ "./server/src/controllers/product.controller.js":
/*!******************************************************!*\
  !*** ./server/src/controllers/product.controller.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"create\": () => (/* binding */ create),\n/* harmony export */   \"deleteID\": () => (/* binding */ deleteID),\n/* harmony export */   \"findAll\": () => (/* binding */ findAll),\n/* harmony export */   \"findOne\": () => (/* binding */ findOne),\n/* harmony export */   \"findSearch\": () => (/* binding */ findSearch),\n/* harmony export */   \"update\": () => (/* binding */ update)\n/* harmony export */ });\n/* harmony import */ var async__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! async */ \"async\");\n/* harmony import */ var async__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(async__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node-fetch */ \"node-fetch\");\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_fetch__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var util_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! util/util.js */ \"util/util.js\");\n/* harmony import */ var util_util_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(util_util_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _models_product_model_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/product.model.js */ \"./server/src/models/product.model.js\");\n/* harmony import */ var _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../comm/logger.js */ \"./server/src/comm/logger.js\");\n/* harmony import */ var _util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../util/utilFunction.js */ \"./server/src/util/utilFunction.js\");\n/* harmony import */ var _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../config/user.def.js */ \"./server/src/config/user.def.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// test code.\r\n// utilLog(\"TTTTTTTAAAAAA %s  %s\",'YYYYY' ,'UUUUUU');\r\n\r\n// let Flds_table = 'flds_dept';\r\nlet Flds_table = 'products';\r\n// Create and Save a new Product\r\nconst create = async function(req, res) {\r\n  console.log('create query = %s', req.query);\r\n  console.log('create body = %s', req.body);\r\n  console.log('create params = %s', req.params);\r\n\r\n  if (!req.body) {\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n      code: 400,\r\n      msg: \"Content can not be empty!\",\r\n      data: []\r\n    };\r\n    res.status(400);\r\n    res.json(msgret);\r\n    return ;\r\n  }\r\n\r\n  const product = new _models_product_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\r\n    product_no : req.body.product_no,\r\n    product_name : req.body.product_name,\r\n    classift : req.body.classift,\r\n    specification : req.body.specification,\r\n    unit : req.body.unit,\r\n    remake : req.body.remake,\r\n\r\n    attribute1 : req.body.attribute1,\r\n    attribute2 : req.body.attribute2,\r\n    attribute3 : req.body.attribute3,\r\n    attribute4 : req.body.attribute4,\r\n    reserve : req.body.reserve,\r\n  });\r\n  // console.log('product = %s', product);\r\n  try {\r\n\r\n    const TABLE_NAME = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n    console.log('product = %s', product);\r\n\r\n    const result2 = await _models_product_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].create(product, TABLE_NAME);\r\n    // console.log('result2');\r\n    // console.log(result2);\r\n\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n      code: 200,\r\n      msg: `product creat successfully  product_no: ${product.product_no}`,\r\n      data: []\r\n    };\r\n    res.json(msgret);\r\n\r\n  } catch (error) {\r\n    // console.log(error.code);\r\n    res.status(500);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n\r\n    let logerfunc = `export const create()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n  }\r\n}\r\n\r\n// 同步功能實現 async/await/Promise .\r\nconst findAll = async function(req, res) {\r\n  console.log('findAll query = %s', req.query);\r\n  console.log('findAll body = %s', req.body);\r\n  console.log('findAll params = %s', req.params);\r\n  // let table = `${global.userConfig.flds_comp}.rfid_ui_flds_a`;\r\n\r\n  const TABLE_NAME = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n  console.log('TABLE_NAME: %s', TABLE_NAME);\r\n  try {\r\n    const result1 = await _models_product_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getAll(TABLE_NAME);\r\n    // console.log('result');\r\n    // console.log(result1);\r\n    if((0,util_util_js__WEBPACK_IMPORTED_MODULE_2__.isNullOrUndefined)(result1[0])){\r\n      let msgret = {\r\n        service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n        code: 404,\r\n        msg: `Flds_user Not find list.`,\r\n        data: []\r\n      };\r\n      // 請求已成功處理，但未返回任何內容\r\n      res.status(200);\r\n      res.json(msgret);\r\n      _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', msgret);\r\n      return ;\r\n    }\r\n\r\n    const result = result1.map(function(row){\r\n      return Object.assign({}, row, { createtime: (0,_util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(row.createtime),  updatetime: (0,_util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(row.updatetime) });\r\n    });\r\n\r\n    res.status(200);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n      code: 200,\r\n      msg: `product findAll lists.`,\r\n      data: result\r\n    };\r\n    res.json(msgret);\r\n\r\n  } catch (error) {\r\n    // console.log(error.code);\r\n    res.status(500);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', msgret);\r\n\r\n    let logerfunc = `export const findAll()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n  }\r\n}\r\n\r\nconst findSearch = async function(req, res) {\r\n  console.log('findSearch query = %s', req.query);\r\n  console.log('findSearch body = %s', req.body);\r\n  console.log('findSearch params = %s', req.params);\r\n\r\n  try {\r\n    const TABLE_NAME = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n\r\n    console.log('TABLE_NAME: %s', TABLE_NAME);\r\n    const result1 = await _models_product_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findSearch(TABLE_NAME, req.query);\r\n    // console.log('result1');\r\n    // console.log(result1);\r\n    // res.json(promise2);\r\n\r\n    if((0,util_util_js__WEBPACK_IMPORTED_MODULE_2__.isNullOrUndefined)(result1[0])){\r\n      let msgret = {\r\n        service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n        code: 404,\r\n        msg: `Products Not find list.`,\r\n        data: []\r\n      };\r\n      res.status(200);\r\n      res.json(msgret);\r\n      _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', msgret);\r\n      return ;\r\n    }\r\n\r\n    const result = result1.map(function(row){\r\n      return Object.assign({}, row, { createtime: (0,_util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(row.createtime),  updatetime: (0,_util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(row.updatetime) });\r\n    });\r\n\r\n    res.status(200);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n      code: 200,\r\n      msg: `Products findSearch successfully.`,\r\n      data: result\r\n    };\r\n    res.json(msgret);\r\n\r\n  } catch (error) {\r\n    res.status(500);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', msgret);\r\n\r\n    let logerfunc = `export const findSearch()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n  }\r\n\r\n}\r\n\r\n// Find a single Product by Id\r\nconst findOne = async function(req, res) {\r\n  console.log('findOne query = %s', req.query);\r\n  console.log('findOne body = %s', req.body);\r\n  console.log('findOne params = %s', req.params);\r\n\r\n  try {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n\r\n      const TABLE_NAME = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n      const result1 = await _models_product_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findById(req.params.id, TABLE_NAME);\r\n\r\n      if( (0,util_util_js__WEBPACK_IMPORTED_MODULE_2__.isNullOrUndefined)(result1[0]) )\r\n      {\r\n        let msgret = {\r\n          service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n          code: 404,\r\n          msg: `Not found product_no: ${req.params.id}`,\r\n          data: []\r\n        };\r\n        // 請求已成功處理，但未返回任何內容\r\n        res.status(200);\r\n        res.json(msgret);\r\n        _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', msgret);\r\n        return ;\r\n      }\r\n\r\n      const result = result1.map(function(row){\r\n        return Object.assign({}, row, { createtime: (0,_util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(row.createtime),  updatetime: (0,_util_utilFunction_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(row.updatetime) });\r\n      });\r\n      res.status(200);\r\n      let msgret = {\r\n        service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n        code: 200,\r\n        msg: `find  product successfully`,\r\n        data: result\r\n      };\r\n      res.json(msgret);\r\n\r\n  } catch (error) {\r\n    // console.log(error.code);\r\n    res.status(500);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', msgret);\r\n\r\n    let logerfunc = `export const findOne()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n  }\r\n\r\n}\r\n\r\n// Update a Product identified by the id in the request\r\nconst update = async function(req, res) {\r\n  console.log('update query = %s', req.query);\r\n  console.log('update body = %s', req.body);\r\n  console.log('update params = %s', req.params);\r\n  const product = new _models_product_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\r\n    product_no : req.params.id,\r\n    product_name : req.body.product_name,\r\n    classift : req.body.classift,\r\n    specification : req.body.specification,\r\n    unit : req.body.unit,\r\n    remake : req.body.remake,\r\n\r\n    attribute1 : req.body.attribute1,\r\n    attribute2 : req.body.attribute2,\r\n    attribute3 : req.body.attribute3,\r\n    attribute4 : req.body.attribute4,\r\n    reserve : req.body.reserve,\r\n  });\r\n\r\n  try {\r\n    const TABLE_NAME = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n    // let Flds_comp = global.userConfig.flds_comp;\r\n    // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n    const result = await _models_product_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateById((req.params.id), product, TABLE_NAME);\r\n    // console.log(result[0]);\r\n\r\n    // if(result.result === 'not_found')\r\n    if( (0,util_util_js__WEBPACK_IMPORTED_MODULE_2__.isNullOrUndefined)(result[0]) )\r\n    {\r\n      let msgret = {\r\n        service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n        code: 404,\r\n        msg: `Not find product_no: ${product.product_no}.`,\r\n        data: []\r\n      };\r\n\r\n      res.status(200);\r\n      res.json(msgret);\r\n      _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', msgret);\r\n\r\n      let logerfunc = `export const update()`;\r\n      let logermsg = `${JSON.stringify(msgret)}`;\r\n      _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n      return ;\r\n    }\r\n\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n      code: 200,\r\n      msg: `Product updateById product_no: ${product.product_no} successfully.`,\r\n      data: []\r\n    };\r\n    res.json(msgret);\r\n\r\n\r\n  } catch (error) {\r\n    // console.log(error.code);\r\n    res.status(500);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', msgret);\r\n\r\n    let logerfunc = `export const update()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n  }\r\n\r\n}\r\n\r\n// Delete a Product with the specified id in the request\r\nconst deleteID = async function(req, res) {\r\n  console.log('delete query = %s', req.query);\r\n  console.log('delete body = %s', req.body);\r\n  console.log('delete params = %s', req.params);\r\n  try {\r\n    const TABLE_NAME = `${global.userConfig.flds_comp}.${Flds_table}`;\r\n    const result1 = await _models_product_model_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].remove(req.params.id, TABLE_NAME);\r\n    // console.log(result1);\r\n\r\n    if( (0,util_util_js__WEBPACK_IMPORTED_MODULE_2__.isNullOrUndefined)(result1[0]) )\r\n    {\r\n      let msgret = {\r\n        service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n        code: 404,\r\n        msg: `Delete not found product_no: ${req.params.id}`,\r\n        data: []\r\n      };\r\n\r\n      res.status(200);\r\n      res.json(msgret);\r\n      _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n\r\n      let logerfunc = `export const deleteID()`;\r\n      let logermsg = `${JSON.stringify(msgret)}`;\r\n      _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n    }\r\n    else{\r\n      let msgret = {\r\n        service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.web,\r\n        code: 200,\r\n        msg: `deleteOne successfully product_no: ${req.params.id}`,\r\n        data: []\r\n      };\r\n      res.json(msgret);\r\n    }\r\n\r\n  } catch (error) {\r\n    res.status(500);\r\n    let msgret = {\r\n      service: _config_user_def_js__WEBPACK_IMPORTED_MODULE_6__.service.db,\r\n      code: error.errno,\r\n      msg: error.code,\r\n      data:[{msg: error.sqlMessage}]\r\n    };\r\n\r\n    res.json(msgret);\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n\r\n    let logerfunc = `export const create()`;\r\n    let logermsg = `${JSON.stringify(msgret)}`;\r\n    _comm_logger_js__WEBPACK_IMPORTED_MODULE_4__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n\r\n  }\r\n\r\n}\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/controllers/product.controller.js?");

/***/ }),

/***/ "./server/src/controllers/tutorial.controller.js":
/*!*******************************************************!*\
  !*** ./server/src/controllers/tutorial.controller.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"create\": () => (/* binding */ create),\n/* harmony export */   \"delete\": () => (/* binding */ _delete),\n/* harmony export */   \"deleteAll\": () => (/* binding */ deleteAll),\n/* harmony export */   \"findAll\": () => (/* binding */ findAll),\n/* harmony export */   \"findAllPublished\": () => (/* binding */ findAllPublished),\n/* harmony export */   \"findOne\": () => (/* binding */ findOne),\n/* harmony export */   \"update\": () => (/* binding */ update)\n/* harmony export */ });\n/* harmony import */ var _comm_logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../comm/logger.js */ \"./server/src/comm/logger.js\");\n/* harmony import */ var _models_tutorial_model_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../models/tutorial.model.js */ \"./server/src/models/tutorial.model.js\");\n\r\n\r\n\r\n\r\n\r\n// Create and Save a new Tutorial\r\nfunction create(req, res) {\r\n  // Validate request\r\n  console.log('tutorial.controller create query = %s', req.query);\r\n  console.log('create body = %s', req.body);\r\n  console.log('create params = %s', req.params);\r\n\r\n  if (!req.body) {\r\n    res.status(400).send({\r\n      message: \"Content can not be empty!\"\r\n    });\r\n  }\r\n\r\n  // // Create a Tutorial\r\n  // const tutorial = new Tutorial({\r\n  //   title: req.body.title,\r\n  //   description: req.body.description,\r\n  //   published: req.body.published || false\r\n  // });\r\n\r\n  // // Save Tutorial in the database\r\n  // Tutorial.create(tutorial, (err, data) => {\r\n  //   if (err)\r\n  //     res.status(500).send({\r\n  //       message:\r\n  //         err.message || \"Some error occurred while creating the Tutorial.\"\r\n  //     });\r\n  //   else res.send(data);\r\n  // });\r\n\r\n  // res.send(req);\r\n  let msg = {\r\n    message: req.query\r\n  };\r\n  res.json(msg);\r\n}\r\n\r\n// Retrieve all Tutorials from the database (with condition).\r\nasync function findAll(req, res) {\r\n  const title = req.query.title;\r\n  console.log('tutorial.controller findAll query = %s', req.query);\r\n  console.log('findAll body = %s', req.body);\r\n  console.log('findAll params = %s', req.params);\r\n\r\n  let table = `${global.userConfig.flds_comp}.rfid_ui_flds_a`;\r\n  // 跨不同資料庫+table, #RFID.資料庫代號=公司代號\r\n  console.log('table: %s', table);\r\n  try {\r\n    const result = _models_tutorial_model_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getAll(table);\r\n    console.log('result');\r\n    console.log(result);\r\n    let msgret = {\r\n      code: 200,\r\n      msg: `product  find lists.`,\r\n      data: result\r\n    };\r\n    res.json(msgret);\r\n  } catch (error) {\r\n    // console.log(error.code);\r\n    res.status(500);\r\n    let msgret = {\r\n      code: error.errno,\r\n      msg: error.code\r\n      // data: error\r\n    };\r\n    res.json(msgret);\r\n    // Logger.info('msgret = %s', msgret);\r\n  }\r\n\r\n  // // Tutorial.getAll(title, (err, data) => {\r\n  // //   if (err)\r\n  // //     res.status(500).send({\r\n  // //       message:\r\n  // //         err.message || \"Some error occurred while retrieving tutorials.\"\r\n  // //     });\r\n  // //   else res.send(data);\r\n  // // });\r\n  // // res.send(req);\r\n  // let msg = {\r\n  //   message: req.query\r\n  // };\r\n  // res.json(msg);\r\n}\r\n\r\n// Find a single Tutorial by Id\r\nfunction findOne(req, res) {\r\n  console.log('tutorial.controller findOne query = %s', req.query);\r\n  console.log('findOne body = %s', req.body);\r\n  console.log('findOne params = %s', req.params);\r\n\r\n  // Tutorial.findById(req.params.id, (err, data) => {\r\n  //   if (err) {\r\n  //     if (err.kind === \"not_found\") {\r\n  //       res.status(404).send({\r\n  //         message: `Not found Tutorial with id ${req.params.id}.`\r\n  //       });\r\n  //     } else {\r\n  //       res.status(500).send({\r\n  //         message: \"Error retrieving Tutorial with id \" + req.params.id\r\n  //       });\r\n  //     }\r\n  //   } else res.send(data);\r\n  // });\r\n  let msgret = {\r\n    code: 500,\r\n    msg: `Not found product_no: ${req.params.id}`\r\n    // data: data\r\n  };\r\n\r\n  res.status(500);\r\n  res.json(msgret);\r\n  _comm_logger_js__WEBPACK_IMPORTED_MODULE_0__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n}\r\n\r\n// find all published Tutorials\r\nfunction findAllPublished(req, res) {\r\n  console.log('tutorial.controller findAllPublished = %s', req.query);\r\n  // Tutorial.getAllPublished((err, data) => {\r\n  //   if (err)\r\n  //     res.status(500).send({\r\n  //       message:\r\n  //         err.message || \"Some error occurred while retrieving tutorials.\"\r\n  //     });\r\n  //   else res.send(data);\r\n  // });\r\n  // res.send(req);\r\n  let msg = {\r\n    message: req.query\r\n  };\r\n  res.json(msg);\r\n}\r\n\r\n// Update a Tutorial identified by the id in the request\r\nfunction update(req, res) {\r\n  console.log('tutorial.controller update query = %s', req.query);\r\n  console.log('update body = %s', req.body);\r\n  console.log('update params = %s', req.params);\r\n  // Validate Request\r\n  if (!req.body) {\r\n    res.status(400).send({\r\n      message: \"Content can not be empty!\"\r\n    });\r\n  }\r\n\r\n  let msgret = {\r\n    code: 500,\r\n    msg: `Not found product_no: ${req.params.id}`\r\n    // data: data\r\n  };\r\n\r\n  res.status(500);\r\n  res.json(msgret);\r\n  _comm_logger_js__WEBPACK_IMPORTED_MODULE_0__.Controllerlogger.info('msgret = %s', JSON.stringify(msgret));\r\n\r\n  let logerfunc = `export function update(req, res) `;\r\n  let logermsg = `${JSON.stringify(msgret)}`;\r\n  _comm_logger_js__WEBPACK_IMPORTED_MODULE_0__.logErr.info('user=%s, func=%s, msg=%s', global.userConfig.flds_user, logerfunc, logermsg);\r\n}\r\n\r\n// Delete a Tutorial with the specified id in the request\r\nconst _delete = (req, res) => {\r\n  console.log('delete query = %s', req.query);\r\n  console.log('delete body = %s', req.body);\r\n  console.log('delete params = %s', req.params);\r\n  // Tutorial.remove(req.params.id, (err, data) => {\r\n  //   if (err) {\r\n  //     if (err.kind === \"not_found\") {\r\n  //       res.status(404).send({\r\n  //         message: `Not found Tutorial with id ${req.params.id}.`\r\n  //       });\r\n  //     } else {\r\n  //       res.status(500).send({\r\n  //         message: \"Could not delete Tutorial with id \" + req.params.id\r\n  //       });\r\n  //     }\r\n  //   } else res.send({ message: `Tutorial was deleted successfully!` });\r\n  // });\r\n  let msg = {\r\n    message: req.query\r\n  };\r\n  res.json(msg);\r\n};\r\n\r\n\r\n// Delete all Tutorials from the database.\r\nfunction deleteAll(req, res) {\r\n  console.log('deleteAll = %s', req.query);\r\n  console.log(req.body);\r\n  // Tutorial.removeAll((err, data) => {\r\n  //   if (err)\r\n  //     res.status(500).send({\r\n  //       message:\r\n  //         err.message || \"Some error occurred while removing all tutorials.\"\r\n  //     });\r\n  //   else res.send({ message: `All Tutorials were deleted successfully!` });\r\n  // });\r\n  // res.send(req);\r\n  let msg = {\r\n    message: req.query\r\n  };\r\n  res.json(msg);\r\n}\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/controllers/tutorial.controller.js?");

/***/ }),

/***/ "./server/src/models/db.js":
/*!*********************************!*\
  !*** ./server/src/models/db.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mysql__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql */ \"mysql\");\n/* harmony import */ var mysql__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mysql__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _config_db_config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config/db.config.js */ \"./server/src/config/db.config.js\");\n\r\n\r\n// import { dbconfig as dbConfig  } from \"../config/db.config.js\";\r\n\r\n// import { dbconfig2 as dbConfig  } from \"../config/db.config.js\";\r\n// import { dbconfig3 as dbConfig  } from \"../config/db.config.js\";\r\n\r\n// import { HOST, USER, PASSWORD, DB, PORT } from \"../config/db.config.js\";\r\nconsole.log(_config_db_config_js__WEBPACK_IMPORTED_MODULE_1__.dbconfig1);\r\nvar connection = (0,mysql__WEBPACK_IMPORTED_MODULE_0__.createPool)({\r\n  host: _config_db_config_js__WEBPACK_IMPORTED_MODULE_1__.dbconfig1.HOST,\r\n  user: _config_db_config_js__WEBPACK_IMPORTED_MODULE_1__.dbconfig1.USER,\r\n  password: _config_db_config_js__WEBPACK_IMPORTED_MODULE_1__.dbconfig1.PASSWORD,\r\n  database: _config_db_config_js__WEBPACK_IMPORTED_MODULE_1__.dbconfig1.DB,\r\n  port: _config_db_config_js__WEBPACK_IMPORTED_MODULE_1__.dbconfig1.PORT\r\n});\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (connection);\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/models/db.js?");

/***/ }),

/***/ "./server/src/models/flds_user.model.js":
/*!**********************************************!*\
  !*** ./server/src/models/flds_user.model.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _db_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db.js */ \"./server/src/models/db.js\");\n\r\n// import { query as _query } from \"./db.js\";\r\n\r\n// import { isNullOrUndefined } from 'url/util.js';\r\n// const TABLE_NAME = 'Flds_user';\r\n// constructor\r\nclass Flds_user {\r\n  constructor(user) {\r\n    this.user_id = user.user_id;\r\n    this.name = user.name;\r\n    this.deptid = user.deptid;\r\n    this.state = user.state;\r\n    this.password = user.password;\r\n  }\r\n  static create(newFlds_user, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // sql.query(\"INSERT INTO Flds_user SET ?\", newFlds_user, (err, res) => {\r\n      let query = `INSERT INTO ${TABLE_NAME} SET ?`;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, newFlds_user, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        console.log(res);\r\n        console.log(\"created Flds_user: \", { ...newFlds_user });\r\n        return resolve({ ...newFlds_user });\r\n      });\r\n    });\r\n  }\r\n  static findById(id, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let query = (\"SELECT * FROM Flds_users WHERE user_id = \" + id);\r\n      let query = `SELECT * FROM ${TABLE_NAME} WHERE user_id = '${id}'`;\r\n      console.log(\"query:\", query);\r\n\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        if (res.length) {\r\n\r\n          // console.log(\"found product: \", res[0]);\r\n          return resolve(res);\r\n        }\r\n        return resolve(res);\r\n        // return resolve({ result: \"not_found\" }, null);\r\n      });\r\n    });\r\n  }\r\n  static getAll(TABLE_NAME, result) {\r\n    return new Promise((resolve, reject) => {\r\n      let query = \"SELECT * FROM \" + TABLE_NAME;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          // console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n        return resolve(res);\r\n      });\r\n    });\r\n  };\r\n\r\n  static findSearch(TABLE_NAME, params) {\r\n    return new Promise((resolve, reject) => {\r\n      console.log(\"params:\", params);\r\n      // let query = `SELECT * FROM ${TABLE_NAME}  WHERE 1 `;\r\n      let query = `SELECT * FROM ${TABLE_NAME} WHERE 1 `;\r\n\r\n      // 檢查參數長度Object.keys(params).length\r\n      // console.log(\"query:\", query, params, Object.keys(params).length);\r\n      if (params.user_id) {\r\n        query = query + `AND user_id LIKE '${params.user_id}%' `;\r\n        console.log(\"params.user_id:\", params.user_id);\r\n      };\r\n\r\n      if (params.deptid) {\r\n        query = query + `AND deptid LIKE '${params.deptid}%' `;\r\n        console.log(\"params.deptid:\", params.deptid);\r\n      };\r\n\r\n      if (params.limit) {\r\n        query = query + `LIMIT ${params.limit} `;\r\n        console.log(\"params.limit:\", params.limit);\r\n      };\r\n\r\n      if (params.offset) {\r\n        query = query + `OFFSET ${params.offset} `;\r\n        console.log(\"params.offset:\", params.offset);\r\n      };\r\n\r\n      // query = query + `ORDER BY ${TABLE_NAME}.user_id LIMIT 100 OFFSET 0 `;\r\n      console.log(\"query: %s\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          return reject(err);\r\n        }\r\n        return resolve(res);\r\n      });\r\n      // return resolve(query);\r\n    });\r\n  };\r\n\r\n  static updateById(id, Flds_user, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n\r\n      let query = `UPDATE ${TABLE_NAME} SET ?  WHERE user_id = '${id}'`;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, Flds_user, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        if (res.affectedRows == 0) {\r\n          // not found product with the id\r\n          console.log(\"error: res.affectedRows == 0\");\r\n          return resolve([]);\r\n        }\r\n\r\n        return resolve([Flds_user]);\r\n      }\r\n      );\r\n\r\n    });\r\n  }\r\n  static remove(id, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      let query = `DELETE FROM ${TABLE_NAME} WHERE user_id = '${id}'`;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n          // result(null, err);\r\n          // return;\r\n        }\r\n\r\n        if (res.affectedRows == 0) {\r\n          console.log(\"error: res.affectedRows == 0\");\r\n          return resolve([]);\r\n        }\r\n        return resolve([res]);\r\n      });\r\n    });\r\n\r\n  }\r\n  static removeAll(TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      let query = `DELETE FROM ${TABLE_NAME} `;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n        console.log(`deleted ${res.affectedRows}  ${TABLE_NAME}`);\r\n        return resolve(res);\r\n      });\r\n    });\r\n  }\r\n  static truncate(table, result) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      let query = `TRUNCATE TABLE  ${table} `;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject({ result: 'error: ' + err });\r\n          // result(null, err);\r\n          // return;\r\n        }\r\n\r\n        console.log(`Truncate ${res.affectedRows}  ${table}`);\r\n        return resolve(res);\r\n        // result(null, res);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Flds_user);\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/models/flds_user.model.js?");

/***/ }),

/***/ "./server/src/models/product.model.js":
/*!********************************************!*\
  !*** ./server/src/models/product.model.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _db_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db.js */ \"./server/src/models/db.js\");\n\r\n\r\n// const sql = require(\"./db.js\");\r\n// const TABLE_NAME = 'products';\r\n// constructor\r\nclass Product {\r\n  constructor(product) {\r\n    this.product_no = product.product_no;\r\n    this.product_name = product.product_name;\r\n    this.classift = product.classift;\r\n    this.specification = product.specification;\r\n    this.unit = product.unit;\r\n    this.remake = product.remake;\r\n\r\n    this.attribute1 = product.attribute1;\r\n    this.attribute2 = product.attribute2;\r\n    this.attribute3 = product.attribute3;\r\n    this.attribute4 = product.attribute4;\r\n    this.reserve = product.reserve;\r\n  }\r\n\r\n  static create(newproduct, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      let query = `INSERT INTO ${TABLE_NAME} SET ?`;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, newproduct, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n        return resolve({ newproduct });\r\n      });\r\n    });\r\n  }\r\n\r\n  static replace(newproduct, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // sql.query(`REPLACE INTO ${TABLE_NAME} SET ?`, newproduct, (err, res) => {\r\n      let query = `REPLACE INTO ${TABLE_NAME} SET ?`;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, newproduct, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n        return resolve(res);\r\n      });\r\n    });\r\n  }\r\n  static findById(id, TABLE_NAME, result) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      // let query = (\"SELECT * FROM products WHERE uid = \" + id);\r\n      let query = `SELECT * FROM ${TABLE_NAME} WHERE product_no = '${id}'`;\r\n      console.log(\"query:\", query);\r\n\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        if (res.length) {\r\n          // console.log(\"found product: \", res[0]);\r\n          return resolve(res);\r\n        }\r\n        return resolve(res);\r\n        // return resolve({ result: \"not_found\" }, null);\r\n      });\r\n    });\r\n  }\r\n  static findByOrders(id, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let query = (\"SELECT * FROM products WHERE uid = \" + id);\r\n      let query = `SELECT * FROM ${TABLE_NAME} WHERE order_no = '${id}'`;\r\n      console.log(\"query:\", query);\r\n\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        if (res.length) {\r\n          // console.log(\"found product: \", res[0]);\r\n          return resolve(res);\r\n        }\r\n        return resolve(res);\r\n        // return resolve([{ result: \"not_found\" }], null);\r\n      });\r\n    });\r\n  }\r\n  // Find來源單號列表\r\n  static findByOrdersName(id, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let query = (\"SELECT * FROM products WHERE uid = \" + id);\r\n      // let query = `SELECT order_no FROM ${TABLE_NAME}  GROUP BY order_no`;\r\n      let query = `SELECT order_no FROM ${TABLE_NAME}  GROUP BY order_no`;\r\n      console.log(\"query:\", query);\r\n\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        if (res.length) {\r\n          // console.log(\"found product: \", res[0]);\r\n          return resolve(res);\r\n        }\r\n        console.log({ result: \"not_found\" });\r\n        return resolve(res);\r\n\r\n        // return resolve([{ result: \"not_found\" }], null);\r\n      });\r\n    });\r\n  }\r\n  static findByPn(id, TABLE_NAME, result) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      // let query = `SELECT * FROM ${TABLE_NAME} WHERE product_no LIKE '%${id}%'`;\r\n      let query = `SELECT * FROM ${TABLE_NAME} WHERE product_no LIKE '${id}%'`;\r\n      console.log(\"query:\", query);\r\n\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        if (res.length) {\r\n          // console.log(\"found product: \", res[0]);\r\n          return resolve(res);\r\n        }\r\n        return resolve(res);\r\n        // return resolve({ result: \"not_found\" }, null);\r\n      });\r\n    });\r\n  }\r\n  static findByLocation_id(id, result) {\r\n    return new Promise((resolve, reject) => {\r\n      // let query = (\"SELECT * FROM products WHERE uid = \" + id);\r\n      // let query = `SELECT warehouse_type, storage_location FROM products WHERE uid = '${id}'`;\r\n      // let query = `SELECT warehouse_type, storage_location FROM products WHERE uid = '${id}' `;\r\n      // let query = `SELECT * FROM products WHERE uid = '${id}' `;\r\n      // let query = `SELECT warehouse_type, storage_location FROM products LEFT JOIN location_tables ON location_tables.warehouse_type = products.warehouse_type WHERE uid = '${id}' `;\r\n      // let query = `SELECT DISTINCT products.warehouse_type, products.storage_location, location_tables.luid,location_tables.warehouse_type, location_tables.storage_location,\r\n      // location_tables.epc FROM products JOIN  location_tables ON products.warehouse_type = location_tables.warehouse_type AND products.storage_location = location_tables.storage_location; `;\r\n      let Flds_comp = global.userConfig.flds_comp;\r\n      const TABLE_NAME = Flds_comp + '.rfid_ui_flds_a';\r\n      let query = `SELECT ${TABLE_NAME}.warehouse_type, ${TABLE_NAME}.storage_location, location_tables.luid,location_tables.warehouse_type, location_tables.storage_location,\r\n    location_tables.epc FROM ${TABLE_NAME} JOIN  location_tables ON ${TABLE_NAME}.warehouse_type = location_tables.warehouse_type AND ${TABLE_NAME}.storage_location = location_tables.storage_location\r\n    WHERE uid = '${id}'`;\r\n\r\n      console.log(\"query:\", query);\r\n\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        if (res.length) {\r\n          // console.log(\"found product: \", res[0]);\r\n          return resolve(res);\r\n        }\r\n        return resolve(res);\r\n        // return resolve({ result: \"not_found\" }, null);\r\n      });\r\n    });\r\n  }\r\n  static findByLocationID(params, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      // let query = `SELECT ${TABLE_NAME}.warehouse_type, ${TABLE_NAME}.storage_location, location_tables.luid,location_tables.warehouse_type, location_tables.storage_location,\r\n      // location_tables.epc FROM ${TABLE_NAME} JOIN  location_tables ON ${TABLE_NAME}.warehouse_type = location_tables.warehouse_type AND ${TABLE_NAME}.storage_location = location_tables.storage_location\r\n      // WHERE uid = '${id}'`;\r\n      console.log(\"params:\", params);\r\n\r\n      let query = `SELECT * FROM  ${TABLE_NAME}  WHERE location_id = '${params.luid}'`;\r\n\r\n      console.log(\"query:\", query);\r\n\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        if (res.length) {\r\n          // console.log(\"found product: \", res[0]);\r\n          return resolve(res);\r\n        }\r\n        return resolve(res);\r\n        // return resolve({ result: \"not_found\" }, null);\r\n      });\r\n    });\r\n  }\r\n  static getAll(table, result) {\r\n    return new Promise((resolve, reject) => {\r\n      let query = \"SELECT * FROM \" + table;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          // result(null, err);\r\n          return reject(err);\r\n        }\r\n        // console.log(\"products: \", res);\r\n        // result(null, res);\r\n        return resolve(res);\r\n      });\r\n    });\r\n  };\r\n\r\n  static findSearch(TABLE_NAME, params) {\r\n    return new Promise((resolve, reject) => {\r\n      console.log(\"params:\", params);\r\n      // let query = `SELECT * FROM ${TABLE_NAME}  WHERE 1 `;\r\n      let query = `SELECT * FROM ${TABLE_NAME} WHERE 1 `;\r\n\r\n      // 檢查參數長度Object.keys(params).length\r\n      // console.log(\"query:\", query, params, Object.keys(params).length);\r\n      if (params.product_no) {\r\n        query = query + `AND ${TABLE_NAME}.product_no LIKE '${params.product_no}%' `;\r\n        console.log(\"params.product_no:\", params.product_no);\r\n      };\r\n\r\n      if (params.product_name) {\r\n        query = query + `AND ${TABLE_NAME}.product_name LIKE '%${params.product_name}%' `;\r\n        console.log(\"params.product_name:\", params.product_name);\r\n      };\r\n\r\n      if (params.classift) {\r\n        query = query + `AND ${TABLE_NAME}.classift LIKE '${params.classift}%' `;\r\n        console.log(\"params.classift:\", params.classift);\r\n      };\r\n\r\n      if (params.specification) {\r\n        query = query + `AND ${TABLE_NAME}.specification LIKE '%${params.specification}%' `;\r\n        console.log(\"params.product_no:\", params.specification);\r\n      };\r\n\r\n      // if (params.lot_no) {\r\n      //   query = query + `AND ${TABLE_NAME}.lot_no LIKE '${params.lot_no}%' `;\r\n      //   console.log(\"params.lot_no:\", params.lot_no);\r\n      // };\r\n\r\n      // if (params.order_no) {\r\n      //   query = query + `AND ${TABLE_NAME}.order_no LIKE '${params.order_no}%' `;\r\n      //   console.log(\"params.order_no:\", params.order_no);\r\n      // };\r\n\r\n      // if (params.location_id) {\r\n      //   query = query + `AND ${TABLE_NAME}.location_id LIKE '${params.location_id}%' `;\r\n      //   console.log(\"params.location_id:\", params.location_id);\r\n      // };\r\n\r\n      // 以時間排序資料,MySQL中ORDER BY与LIMIT一起使用（有坑）\r\n      // 需要确保无论带不带LIMIT都要以相同的顺序返回，那么你可以在ORDER BY中包含附加列 id，以使顺序具有确定性.\r\n      // query = query + `ORDER BY ${TABLE_NAME}.updatetime DESC, id DESC LIMIT 6`;\r\n      // query = query + `ORDER BY ${TABLE_NAME}.updatetime ASC, id ASC LIMIT 6`;\r\n      // query = query + `ORDER BY ${TABLE_NAME}.updatetime DESC`;\r\n      // query = query + `ORDER BY ${TABLE_NAME}.updatetime ASC`;\r\n\r\n      if (params.limit) {\r\n        query = query + `LIMIT ${params.limit} `;\r\n        console.log(\"params.limit:\", params.limit);\r\n      };\r\n\r\n      if (params.offset) {\r\n        query = query + `OFFSET ${params.offset} `;\r\n        console.log(\"params.offset:\", params.offset);\r\n      };\r\n\r\n      // 依據 uid 排序\r\n      // query = query + `ORDER BY ${TABLE_NAME}.uid LIMIT 100 OFFSET 0 `;\r\n      // query = query + `ORDER BY ${TABLE_NAME}.uid LIMIT 0, 100 `;\r\n      // query = query + ` LIMIT 3, 2 `;\r\n      // 依據 資料庫順序取 100筆\r\n      // query = query + ` LIMIT 100 OFFSET 0 `;\r\n      console.log(\"query: %s\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          return reject(err);\r\n        }\r\n        return resolve(res);\r\n      });\r\n      // return resolve(query);\r\n    });\r\n  }\r\n  static QryPnStock(TABLE_NAME, params) {\r\n    return new Promise((resolve, reject) => {\r\n      console.log(\"params:\", params);\r\n      // let query = `SELECT * FROM ${TABLE_NAME}  WHERE 1 `;\r\n      let query = `SELECT * FROM ${TABLE_NAME} WHERE 1 `;\r\n\r\n      // 檢查參數長度Object.keys(params).length\r\n      // console.log(\"query:\", query, params, Object.keys(params).length);\r\n      if (params.pn) {\r\n        query = query + `AND ${TABLE_NAME}.product_no LIKE '${params.pn}%' `;\r\n        console.log(\"params.pn:\", params.pn);\r\n      };\r\n\r\n      // if(params.lot_no)\r\n      // {\r\n      //   query = query + `AND ${TABLE_NAME}.lot_no LIKE '${params.lot_no}%' `;\r\n      //   console.log(\"params.lot_no:\", params.lot_no);\r\n      // };\r\n      if (params.ku1) {\r\n        query = query + `AND ${TABLE_NAME}.warehouse_type >= '${params.ku1}' `;\r\n        console.log(\"params.ku1:\", params.ku1);\r\n      };\r\n\r\n      if (params.ku2) {\r\n        query = query + `AND ${TABLE_NAME}.warehouse_type <= '${params.ku2}' `;\r\n        console.log(\"params.ku2:\", params.ku2);\r\n      };\r\n\r\n      // if(params.storage_location)\r\n      // {\r\n      //   query = query + `AND ${TABLE_NAME}.storage_location LIKE '${params.storage_location}%' `;\r\n      //   console.log(\"params.storage_location:\", params.storage_location);\r\n      // };\r\n      if (params.limit) {\r\n        query = query + `LIMIT ${params.limit} `;\r\n        console.log(\"params.limit:\", params.limit);\r\n      };\r\n\r\n      if (params.offset) {\r\n        query = query + `OFFSET ${params.offset} `;\r\n        console.log(\"params.offset:\", params.offset);\r\n      };\r\n\r\n      // 依據 uid 排序\r\n      // query = query + `ORDER BY ${TABLE_NAME}.uid LIMIT 100 OFFSET 0 `;\r\n      // query = query + `ORDER BY ${TABLE_NAME}.uid LIMIT 0, 100 `;\r\n      // query = query + ` LIMIT 3, 2 `;\r\n      // 依據 資料庫順序取 100筆\r\n      // query = query + ` LIMIT 100 OFFSET 0 `;\r\n      console.log(\"query: %s\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          return reject(err);\r\n        }\r\n        return resolve(res);\r\n      });\r\n      // return resolve(query);\r\n    });\r\n  }\r\n  static QryKuStock(TABLE_NAME, params) {\r\n    return new Promise((resolve, reject) => {\r\n      console.log(\"params:\", params);\r\n      // let query = `SELECT * FROM ${TABLE_NAME}  WHERE 1 `;\r\n      let query = `SELECT * FROM ${TABLE_NAME} WHERE 1 `;\r\n\r\n      // 檢查參數長度Object.keys(params).length\r\n      // console.log(\"query:\", query, params, Object.keys(params).length);\r\n      if (params.ku) {\r\n        query = query + `AND ${TABLE_NAME}.warehouse_type = '${params.ku}' `;\r\n        console.log(\"params.ku:\", params.ku);\r\n      };\r\n\r\n      if (params.tw1) {\r\n        query = query + `AND ${TABLE_NAME}.storage_location >= '${params.tw1}' `;\r\n        console.log(\"params.tw1:\", params.tw1);\r\n      };\r\n\r\n      if (params.tw2) {\r\n        query = query + `AND ${TABLE_NAME}.storage_location <= '${params.tw2}' `;\r\n        console.log(\"params.tw2:\", params.tw2);\r\n      };\r\n\r\n      if (params.limit) {\r\n        query = query + `LIMIT ${params.limit} `;\r\n        console.log(\"params.limit:\", params.limit);\r\n      };\r\n\r\n      if (params.offset) {\r\n        query = query + `OFFSET ${params.offset} `;\r\n        console.log(\"params.offset:\", params.offset);\r\n      };\r\n\r\n      // 依據 uid 排序\r\n      // query = query + `ORDER BY ${TABLE_NAME}.uid LIMIT 100 OFFSET 0 `;\r\n      // query = query + `ORDER BY ${TABLE_NAME}.uid LIMIT 0, 100 `;\r\n      // query = query + ` LIMIT 3, 2 `;\r\n      // 依據 資料庫順序取 100筆\r\n      // query = query + ` LIMIT 100 OFFSET 0 `;\r\n      console.log(\"query: %s\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          return reject(err);\r\n        }\r\n        return resolve(res);\r\n      });\r\n      // return resolve(query);\r\n    });\r\n  }\r\n  static unbound(TABLE_NAME, Flds_comp) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      let query = `SELECT ${TABLE_NAME}.*, ${Flds_comp}.rfid_in_flds_b.location_id FROM ${TABLE_NAME}\r\n    LEFT JOIN ${Flds_comp}.rfid_in_flds_b\r\n    ON ${TABLE_NAME}.uid = ${Flds_comp}.rfid_in_flds_b.uid`;\r\n      console.log(\"unbound  query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n        return resolve(res);\r\n      });\r\n    });\r\n  }\r\n  static bind_flds_abc(TABLE_NAME, params) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      // let query = `SELECT ${TABLE_NAME}.*, ${Flds_comp}.rfid_in_flds_b.location_id FROM ${TABLE_NAME}\r\n      // LEFT JOIN ${Flds_comp}.rfid_in_flds_b\r\n      // ON ${TABLE_NAME}.uid = ${Flds_comp}.rfid_in_flds_b.uid`;\r\n      // let query = `SELECT *  FROM ${TABLE_NAME}  WHERE location_id IS NOT NULL`;\r\n      // let query = `SELECT *  FROM ${TABLE_NAME}  WHERE location_id = params.location_id`;\r\n      let query = `SELECT * FROM ${TABLE_NAME} WHERE 1 `;\r\n      if (params.order_no) {\r\n        query = query + `AND ${TABLE_NAME}.order_no LIKE '${params.order_no}%' `;\r\n        console.log(\"params.order_no:\", params.order_no);\r\n      };\r\n\r\n      // query =  query + `AND ${TABLE_NAME}.order_no LIKE '${isNullOrUndefined(params.location_id) ? '' :params.location_id}%' `;\r\n      // if(params.location_id)\r\n      // {\r\n      //   query = query + `AND ${TABLE_NAME}.location_id LIKE '${params.location_id}%' `;\r\n      //   console.log(\"params.location_id:\", params.location_id);\r\n      // };\r\n      console.log(\"bind_flds_abc  query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n        return resolve(res);\r\n      });\r\n    });\r\n  }\r\n  static bind_flds_ab(TABLE_NAME, Flds_comp) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      // let query = `SELECT ${TABLE_NAME}.*, ${Flds_comp}.rfid_in_flds_b.location_id FROM ${TABLE_NAME}\r\n      // LEFT JOIN ${Flds_comp}.rfid_in_flds_b\r\n      // ON ${TABLE_NAME}.uid = ${Flds_comp}.rfid_in_flds_b.uid`;\r\n      // let query = `SELECT *  FROM ${TABLE_NAME}  WHERE location_id IS NOT NULL`;\r\n      let query = `SELECT *  FROM ${TABLE_NAME}  WHERE location_id != \"\"`;\r\n      console.log(\"bind_flds_ab  query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n        return resolve(res);\r\n      });\r\n    });\r\n  }\r\n  static unbound_flds_ab(TABLE_NAME, params) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      // let query = `SELECT ${TABLE_NAME}.*, ${Flds_comp}.rfid_in_flds_b.location_id FROM ${TABLE_NAME}\r\n      // LEFT JOIN ${Flds_comp}.rfid_in_flds_b\r\n      // ON ${TABLE_NAME}.uid = ${Flds_comp}.rfid_in_flds_b.uid`;\r\n      // let query = `SELECT *  FROM ${TABLE_NAME}  WHERE location_id IS NOT NULL`;\r\n      let query = `SELECT *  FROM ${TABLE_NAME}  WHERE location_id = \"\" `;\r\n      if (params.order_no) {\r\n        query = query + `AND ${TABLE_NAME}.order_no LIKE '${params.order_no}%' `;\r\n        console.log(\"params.order_no:\", params.order_no);\r\n      };\r\n      console.log(\"unbound_flds_ab  query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n        return resolve(res);\r\n      });\r\n    });\r\n  }\r\n  static updateById(id, product, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      let query = `UPDATE ${TABLE_NAME} SET ?  WHERE product_no = '${id}'`;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, product, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        if (res.affectedRows == 0) {\r\n          // not found product with the id\r\n          console.log(\"error: res.affectedRows == 0\");\r\n          return resolve([]);\r\n          // return resolve({ result: \"not_found\" });\r\n        }\r\n        // 統一格式 return array\r\n        return resolve([[product]]);\r\n      }\r\n      );\r\n    });\r\n  }\r\n  static updateByParams(params, product, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      // let query = `UPDATE ${TABLE_NAME} SET ?  WHERE uid = '${product.uid}'`;\r\n      // let query = `UPDATE ${TABLE_NAME} SET ?  WHERE ${TABLE_NAME}.uid = '${product.uid}' AND  ${TABLE_NAME}.order_no = '${product.order_no}'`;\r\n      // console.log(\"query:\", query);\r\n      let query = `UPDATE ${TABLE_NAME} SET ?  WHERE ${TABLE_NAME}.uid = '${params.uid}' `;\r\n      if (params.order_no) {\r\n        query = query + `AND ${TABLE_NAME}.order_no = '${params.order_no}' `;\r\n        console.log(\"params.order_no:\", params.order_no);\r\n      };\r\n      console.log(\"query:\", query);\r\n      // delete product.uid;\r\n      // delete product.order_no;\r\n      // console.log(product);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, product, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        if (res.affectedRows == 0) {\r\n          // not found product with the id\r\n          console.log(\"error: res.affectedRows == 0\");\r\n          return resolve([]);\r\n          // return resolve({ result: \"not_found\" });\r\n        }\r\n        // console.log(res);\r\n        // return resolve(res);\r\n        // 統一格式 return array\r\n        // console.log([[product]]);\r\n        return resolve([[product]]);\r\n      }\r\n      );\r\n    });\r\n  }\r\n  static updateById_old(id, product, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      let query = `UPDATE ${TABLE_NAME} SET flds_comp = '${product.flds_comp}', order_no = '${product.order_no}', serial_no = '${product.serial_no}',\r\n    warehouse_type = '${product.warehouse_type}', storage_location = '${product.storage_location}', lot_no = '${product.lot_no}',\r\n    product_no = '${product.product_no}', product_name = '${product.product_name}', specification = '${product.specification}',\r\n    quantity = '${product.quantity}',ui_quantity = '${product.ui_quantity}', unit = '${product.unit}', packing_quantity = '${product.packing_quantity}',\r\n    packing_unit = '${product.packing_unit}', attribute1 = '${product.attribute1}', attribute2 = '${product.attribute2}',\r\n    attribute3 = '${product.attribute3}', attribute4 = '${product.attribute4}', attribute5 = '${product.attribute5}', ui_check_state = '${product.ui_check_state}'\r\n    WHERE uid = '${id}'`;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        if (res.affectedRows == 0) {\r\n          // not found product with the id\r\n          console.log(\"error: res.affectedRows == 0\");\r\n          return resolve({ result: \"not_found\" });\r\n        }\r\n\r\n        return resolve(product);\r\n      }\r\n      );\r\n    });\r\n  }\r\n  static updateById_flds_b(id, product, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let query = `UPDATE ${TABLE_NAME} SET users_id = '${product.users_id}', location_id = '${product.location_id}',\r\n      // stamp1 = '${product.stamp1}' WHERE uid = '${id}'`;\r\n      // let query = `UPDATE ${TABLE_NAME} SET\r\n      //             users_id = '${product.users_id}', location_id = '${product.location_id}',\r\n      //             stamp1 = '${product.stamp1}' WHERE uid = '${id}'`;\r\n      let query = `UPDATE ${TABLE_NAME} SET ?  WHERE uid = '${id}'`;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, product, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n\r\n        if (res.affectedRows == 0) {\r\n          // not found product with the id\r\n          console.log(\"error: res.affectedRows == 0\");\r\n          return resolve({ result: \"not_found\" });\r\n          // result({ result: \"not_found\" }, null);\r\n          // return;\r\n        }\r\n\r\n        // console.log(\"updated product: \" + product );\r\n        // console.log(res);\r\n        return resolve(product);\r\n        // result(null, {...product });\r\n        // result(null, { id: id, ...product });\r\n      }\r\n      );\r\n    });\r\n  }\r\n  static removeParams(params, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      // let query = `DELETE FROM ${TABLE_NAME} WHERE ${TABLE_NAME}.uid = '${params.uid}' AND  ${TABLE_NAME}.order_no = '${params.order_no}'`;\r\n      // let query = `DELETE FROM ${TABLE_NAME} WHERE 1 `;\r\n      let query = `DELETE FROM ${TABLE_NAME} `;\r\n      if (params.uid) {\r\n        query = query + `WHERE ${TABLE_NAME}.uid = '${params.uid}' `;\r\n        console.log(\"params.uid:\", params.uid);\r\n        if (params.order_no) {\r\n          query = query + `AND ${TABLE_NAME}.order_no = '${params.order_no}' `;\r\n          console.log(\"params.order_no:\", params.order_no);\r\n        };\r\n      }\r\n\r\n      else {\r\n        if (params.order_no) {\r\n          query = query + `WHERE ${TABLE_NAME}.order_no = '${params.order_no}' `;\r\n          console.log(\"params.order_no:\", params.order_no);\r\n        };\r\n      }\r\n\r\n      // let query = `DELETE FROM ${TABLE_NAME} WHERE ${isNullOrUndefined(params.uid)} ? '' : ${TABLE_NAME}.uid = '${params.uid}' AND  ${TABLE_NAME}.order_no = '${params.order_no}'`;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n          // result(null, err);\r\n          // return;\r\n        }\r\n\r\n        if (res.affectedRows == 0) {\r\n          console.log(\"error: res.affectedRows == 0\");\r\n          return resolve([]);\r\n          // return resolve({ result: \"not_found\" });\r\n          // not found product with the id\r\n          // result({ result: \"not_found\" }, null);\r\n          // return;\r\n        }\r\n        console.log(\"deleted res: \", res);\r\n        return resolve([params]);\r\n        // console.log(\"deleted product with id: \", id);\r\n        // result(null, res);\r\n      });\r\n    });\r\n  }\r\n  static remove(id, TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      let query = `DELETE FROM ${TABLE_NAME} WHERE product_no = '${id}'`;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n          // result(null, err);\r\n          // return;\r\n        }\r\n\r\n        if (res.affectedRows == 0) {\r\n          console.log(\"error: res.affectedRows == 0\");\r\n          return resolve([]);\r\n          // return resolve({ result: \"not_found\" });\r\n          // not found product with the id\r\n          // result({ result: \"not_found\" }, null);\r\n          // return;\r\n        }\r\n        return resolve([res]);\r\n        // console.log(\"deleted product with id: \", id);\r\n        // result(null, res);\r\n      });\r\n    });\r\n\r\n  }\r\n  static removeAll(TABLE_NAME) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      let query = `DELETE FROM ${TABLE_NAME} `;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject(err);\r\n        }\r\n        console.log(`deleted ${res.affectedRows} products`);\r\n        return resolve(res);\r\n      });\r\n    });\r\n  }\r\n  static truncate(table, result) {\r\n    return new Promise((resolve, reject) => {\r\n      // let Flds_comp = global.userConfig.flds_comp;\r\n      // const TABLE_NAME = Flds_comp+'.rfid_ui_flds_a';\r\n      let query = `TRUNCATE TABLE  ${table} `;\r\n      console.log(\"query:\", query);\r\n      _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(query, (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          return reject({ result: 'error: ' + err });\r\n          // result(null, err);\r\n          // return;\r\n        }\r\n\r\n        console.log(`Truncate ${res.affectedRows} products`);\r\n        return resolve(res);\r\n        // result(null, res);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Product);\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/models/product.model.js?");

/***/ }),

/***/ "./server/src/models/tutorial.model.js":
/*!*********************************************!*\
  !*** ./server/src/models/tutorial.model.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _db_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db.js */ \"./server/src/models/db.js\");\n// const sql = require(\"./db.js\");\r\n\r\n// constructor\r\nclass Tutorial {\r\n  constructor(tutorial) {\r\n    this.title = tutorial.title;\r\n    this.description = tutorial.description;\r\n    this.published = tutorial.published;\r\n  }\r\n  static create(newTutorial, result) {\r\n    _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"INSERT INTO tutorials SET ?\", newTutorial, (err, res) => {\r\n      if (err) {\r\n        console.log(\"error: \", err);\r\n        result(err, null);\r\n        return;\r\n      }\r\n\r\n      console.log(\"created tutorial: \", { id: res.insertId, ...newTutorial });\r\n      result(null, { id: res.insertId, ...newTutorial });\r\n    });\r\n  }\r\n  static findById(id, result) {\r\n    _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(`SELECT * FROM tutorials WHERE id = ${id}`, (err, res) => {\r\n      if (err) {\r\n        console.log(\"error: \", err);\r\n        result(err, null);\r\n        return;\r\n      }\r\n\r\n      if (res.length) {\r\n        console.log(\"found tutorial: \", res[0]);\r\n        result(null, res[0]);\r\n        return;\r\n      }\r\n\r\n      // not found Tutorial with the id\r\n      result({ kind: \"not_found\" }, null);\r\n    });\r\n  }\r\n  static getAll(title, result) {\r\n    let query = \"SELECT * FROM tutorials\";\r\n\r\n    if (title) {\r\n      query += ` WHERE title LIKE '%${title}%'`;\r\n    }\r\n\r\n    console.log(\"query:\", query);\r\n    return query;\r\n    // sql.query(query, (err, res) => {\r\n    //   if (err) {\r\n    //     console.log(\"error: \", err);\r\n    //     result(null, err);\r\n    //     return;\r\n    //   }\r\n    //   console.log(\"tutorials: \", res);\r\n    //   result(null, res);\r\n    // });\r\n  }\r\n  static getAllPublished(result) {\r\n    _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"SELECT * FROM tutorials WHERE published=true\", (err, res) => {\r\n      if (err) {\r\n        console.log(\"error: \", err);\r\n        result(null, err);\r\n        return;\r\n      }\r\n\r\n      console.log(\"tutorials: \", res);\r\n      result(null, res);\r\n    });\r\n  }\r\n  static updateById(id, tutorial, result) {\r\n    _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\r\n      \"UPDATE tutorials SET title = ?, description = ?, published = ? WHERE id = ?\",\r\n      [tutorial.title, tutorial.description, tutorial.published, id],\r\n      (err, res) => {\r\n        if (err) {\r\n          console.log(\"error: \", err);\r\n          result(null, err);\r\n          return;\r\n        }\r\n\r\n        if (res.affectedRows == 0) {\r\n          // not found Tutorial with the id\r\n          result({ kind: \"not_found\" }, null);\r\n          return;\r\n        }\r\n\r\n        console.log(\"updated tutorial: \", { id: id, ...tutorial });\r\n        result(null, { id: id, ...tutorial });\r\n      }\r\n    );\r\n  }\r\n  static remove(id, result) {\r\n    _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"DELETE FROM tutorials WHERE id = ?\", id, (err, res) => {\r\n      if (err) {\r\n        console.log(\"error: \", err);\r\n        result(null, err);\r\n        return;\r\n      }\r\n\r\n      if (res.affectedRows == 0) {\r\n        // not found Tutorial with the id\r\n        result({ kind: \"not_found\" }, null);\r\n        return;\r\n      }\r\n\r\n      console.log(\"deleted tutorial with id: \", id);\r\n      result(null, res);\r\n    });\r\n  }\r\n  static removeAll(result) {\r\n    _db_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].query(\"DELETE FROM tutorials\", (err, res) => {\r\n      if (err) {\r\n        console.log(\"error: \", err);\r\n        result(null, err);\r\n        return;\r\n      }\r\n\r\n      console.log(`deleted ${res.affectedRows} tutorials`);\r\n      result(null, res);\r\n    });\r\n  }\r\n}\r\n\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Tutorial);\n\n//# sourceURL=webpack://express-es6-sample/./server/src/models/tutorial.model.js?");

/***/ }),

/***/ "./server/src/routes/catalog.routes.js":
/*!*********************************************!*\
  !*** ./server/src/routes/catalog.routes.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _controllers_tutorial_controller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../controllers/tutorial.controller.js */ \"./server/src/controllers/tutorial.controller.js\");\n\r\nconst router = (0,express__WEBPACK_IMPORTED_MODULE_0__.Router)();\r\n\r\n\r\n\r\n// const tutorials = require(\"../controllers/tutorial.controller.js\");\r\n\r\n\r\n// 在每一個請求被處理之前都會執行的 middleware\r\nrouter.use(function(req, res, next) {\r\n\r\n  // 輸出記錄訊息至終端機\r\n  console.log('catalog router.use =', req.method + req.url);\r\n\r\n  // 繼續路由處理\r\n  next();\r\n});\r\n\r\n// http://192.168.248.34:3000/catalog/ test --------------------------------------------------------------\r\n// Create a new Tutorial\r\nrouter.post(\"/\", _controllers_tutorial_controller_js__WEBPACK_IMPORTED_MODULE_1__.create);\r\n\r\n// Retrieve all Tutorials\r\nrouter.get(\"/\", _controllers_tutorial_controller_js__WEBPACK_IMPORTED_MODULE_1__.findAll);\r\n\r\n// // Retrieve all published Tutorials\r\n// router.get(\"/published\", tutorials.findAllPublished);\r\n\r\n// // Retrieve a single Tutorial with id\r\nrouter.get(\"/:id\", _controllers_tutorial_controller_js__WEBPACK_IMPORTED_MODULE_1__.findOne);\r\n\r\n// // Update a Tutorial with id\r\nrouter.put(\"/:id\", _controllers_tutorial_controller_js__WEBPACK_IMPORTED_MODULE_1__.update);\r\n\r\n// // Delete a Tutorial with id\r\nrouter.delete(\"/:id\", _controllers_tutorial_controller_js__WEBPACK_IMPORTED_MODULE_1__[\"delete\"]);\r\n\r\n// // Delete all Tutorials\r\n// router.delete(\"/\", tutorials.deleteAll);\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/routes/catalog.routes.js?");

/***/ }),

/***/ "./server/src/routes/flds_user.routes.js":
/*!***********************************************!*\
  !*** ./server/src/routes/flds_user.routes.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _controllers_flds_user_controller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../controllers/flds_user.controller.js */ \"./server/src/controllers/flds_user.controller.js\");\n\r\n\r\nconst router = (0,express__WEBPACK_IMPORTED_MODULE_0__.Router)();\r\n\r\n// import { findAll, create, findSearch, findOne, update, deleteID } from \"../controllers/flds_user.controller.js\";\r\n\r\n\r\n// 在每一個請求被處理之前都會執行的 middleware\r\nrouter.use(function(req, res, next) {\r\n\r\n  // 輸出記錄訊息至終端機\r\n  console.log('flds_user.router.use =', req.method + req.url);\r\n\r\n  // 繼續路由處理\r\n  next();\r\n});\r\n\r\n// Retrieve all flds_user\r\nrouter.get(\"/\", _controllers_flds_user_controller_js__WEBPACK_IMPORTED_MODULE_1__.findAll);\r\nrouter.get(\"/findsearch\", _controllers_flds_user_controller_js__WEBPACK_IMPORTED_MODULE_1__.findSearch);\r\n\r\n// Retrieve a single Location with id\r\nrouter.get(\"/:id\", _controllers_flds_user_controller_js__WEBPACK_IMPORTED_MODULE_1__.findOne);\r\n// router.post(\"/:id\", flds_user.create);\r\n\r\n// Create a new user\r\nrouter.post(\"/\", _controllers_flds_user_controller_js__WEBPACK_IMPORTED_MODULE_1__.create);\r\nrouter.post(\"/:id\", _controllers_flds_user_controller_js__WEBPACK_IMPORTED_MODULE_1__.create);\r\n\r\n// Update a user with id\r\nrouter.put(\"/:id\", _controllers_flds_user_controller_js__WEBPACK_IMPORTED_MODULE_1__.update);\r\n\r\n// Delete a user with id\r\nrouter.delete(\"/:id\", _controllers_flds_user_controller_js__WEBPACK_IMPORTED_MODULE_1__.deleteID);\r\n\r\n// Delete all user\r\n// router.delete(\"/\", flds_user.deleteAll);\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\r\n\r\n// ********  說明  ********\r\n// 是以 REST 風格來開發 RESTful API\r\n// 獲取使用者資料 /GET /users\r\n// 獲取使用者資料 /GET /user/1\r\n// 新增使用者資料 /POST /user\r\n// 更新使用者資料 /PUT /user/1\r\n// 刪除使用者資料 /DELETE /user/1\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/routes/flds_user.routes.js?");

/***/ }),

/***/ "./server/src/routes/index.js":
/*!************************************!*\
  !*** ./server/src/routes/index.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n\r\n\r\nvar router = (0,express__WEBPACK_IMPORTED_MODULE_0__.Router)();\r\n\r\n/* GET home page. */\r\nrouter.get('/', function (req, res) {\r\n    // console.log('req = %s', req);\r\n    res.redirect('/catalog');\r\n});\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\n\n//# sourceURL=webpack://express-es6-sample/./server/src/routes/index.js?");

/***/ }),

/***/ "./server/src/routes/product.routes.js":
/*!*********************************************!*\
  !*** ./server/src/routes/product.routes.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _controllers_product_controller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../controllers/product.controller.js */ \"./server/src/controllers/product.controller.js\");\n\r\n\r\nconst router = (0,express__WEBPACK_IMPORTED_MODULE_0__.Router)();\r\n\r\n// import { findAll, create, update, findSearch, QryStock, QryPnStock, QryKuStock, QryEpcStock, createarr, exp2Rfid, exp2RfidAPI, sync2ERP, unbind_abc_list, unbind_abc, bind_abc_list, bind_abc, bind_update, bind_delete, findByPn, findByOrdersName, updatestock, findOne, findUpdate, findDelete, deleteID } from \"../controllers/product.controller.js\";\r\n\r\n// const products = require(\"../controllers/rfid_ui_flds_a.controller.js\");\r\n\r\n// 在每一個請求被處理之前都會執行的 middleware\r\nrouter.use(function(req, res, next) {\r\n\r\n  // 輸出記錄訊息至終端機\r\n  console.log('product router.use =', req.method + req.url);\r\n\r\n  // 繼續路由處理\r\n  next();\r\n});\r\n\r\nrouter.get(\"/\", _controllers_product_controller_js__WEBPACK_IMPORTED_MODULE_1__.findAll);\r\n\r\nrouter.post(\"/\", _controllers_product_controller_js__WEBPACK_IMPORTED_MODULE_1__.create);\r\nrouter.post(\"/:id\", _controllers_product_controller_js__WEBPACK_IMPORTED_MODULE_1__.create);\r\n\r\n// 以參數查詢\r\nrouter.get(\"/findSearch\", _controllers_product_controller_js__WEBPACK_IMPORTED_MODULE_1__.findSearch);\r\n\r\n// Retrieve a single products with id\r\nrouter.get(\"/:id\", _controllers_product_controller_js__WEBPACK_IMPORTED_MODULE_1__.findOne);\r\n\r\n// Update a products with id\r\nrouter.put(\"/:id\", _controllers_product_controller_js__WEBPACK_IMPORTED_MODULE_1__.update);\r\n\r\n// Delete a products with id\r\nrouter.delete(\"/:id\", _controllers_product_controller_js__WEBPACK_IMPORTED_MODULE_1__.deleteID);\r\n\r\n// 以下刪除\r\n// // 以rfid_ui_flds_a 查詢\r\n// router.get(\"/\", products.findAll);\r\n// router.post(\"/\", products.create);\r\n// // 以rfid_ui_flds_a 更新\r\n// router.put(\"/\", products.update);\r\n\r\n// // 以rfid_ui_flds_a 查詢\r\n// router.get(\"/findSearch\", products.findSearch);\r\n\r\n// // 以rfid_stock_flds_ab 查詢\r\n// router.get(\"/findSearch/QryStock\", products.QryStock);\r\n// router.get(\"/findSearch/QryPnStock\", products.QryPnStock);\r\n// router.get(\"/findSearch/QryKuStock\", products.QryKuStock);\r\n// // 以EPC查詢品號明細列表\r\n// // router.get(\"/findSearch/QryEpcStock/:id\", products.QryEpcStock);\r\n\r\n// // router.get(\"/find_flds_ab\", products.find_flds_ab);\r\n// // Retrieve all products\r\n// router.get(\"/create\", products.findAll);\r\n// // Create a new products\r\n// router.post(\"/create\", products.create);\r\n// router.post(\"/createarr\", products.createarr);\r\n\r\n// // router.get(\"/exp2rfid\", products.exp2Rfid);\r\n// // router.get(\"/exp2rfidapi\", products.exp2RfidAPI);\r\n// // router.get(\"/sync2erp\", products.sync2ERP);\r\n\r\n// // 查詢未綁定列表\r\n// // Unbound all products\r\n// // router.get(\"/unbound\", products.unbound);\r\n// // router.get(\"/unbind\", products.unbind_abc_list);\r\n// // router.put(\"/unbind\", products.unbind_abc);\r\n\r\n// // router.get(\"/unbound_flds_ab\", products.unbound_flds_ab);\r\n// // Bind rfid_ui_flds_a products\r\n// // router.get(\"/bind\", products.bind_b);\r\n\r\n// // // rfid_in_flds_abc 資料表\r\n// // router.get(\"/bind\", products.bind_abc_list);\r\n// // // rfid_ui_flds_a --> rfid_in_flds_abc 綁定\r\n// // router.put(\"/bind\", products.bind_abc);\r\n// // // UI /bind/:id --> rfid_in_flds_abc 更新\r\n// // router.put(\"/bind/:id\", products.bind_update);\r\n// // // 加入delete功能\r\n// // router.delete(\"/bind\", products.bind_delete);\r\n\r\n// // 品號明細查詢列表\r\n// router.get(\"/findbyPN/:id\", products.findByPn);\r\n\r\n// // 來源單號查詢列表\r\n// router.get(\"/findByOrdersName\", products.findByOrdersName);\r\n\r\n// // // 單據完成作業，RFID庫存表更新(rfid_stock_flds_ab)\r\n// // // router.get(\"/updatestock\", products.finish);\r\n// // router.get(\"/updatestock\", products.updatestock);\r\n\r\n// // Retrieve a single products with id\r\n// router.get(\"/:id\", products.findOne);\r\n// router.post(\"/:id\", products.create);\r\n// // 以rfid_ui_flds_a 更新\r\n// // Update a products with req.body.uid + req.body.order_no 參數更新\r\n// router.put(\"/findUpdate\", products.findUpdate);\r\n// // Update a products with uid\r\n// router.put(\"/:id\", products.update);\r\n\r\n// // Delete a products with find params.\r\n// router.delete(\"/findDelete\", products.findDelete);\r\n// // Delete a products with id\r\n// router.delete(\"/:id\", products.deleteID);\r\n\r\n// // Delete all products\r\n// // router.delete(\"/\", products.deleteAll);\r\n\r\n// // // Retrieve all published products\r\n// // router.get(\"/published\", products.findAllPublished);\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);\r\n\n\n//# sourceURL=webpack://express-es6-sample/./server/src/routes/product.routes.js?");

/***/ }),

/***/ "./server/src/util/utilFunction.js":
/*!*****************************************!*\
  !*** ./server/src/util/utilFunction.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ \"moment\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);\n\r\nfunction formatDate(date) {\r\n    return moment__WEBPACK_IMPORTED_MODULE_0___default()(date).format('YYYY-MM-DD HH:mm:ss');\r\n  }\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (formatDate);\n\n//# sourceURL=webpack://express-es6-sample/./server/src/util/utilFunction.js?");

/***/ }),

/***/ "async":
/*!***********************************!*\
  !*** external "require('async')" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require('async');

/***/ }),

/***/ "body-parser":
/*!*****************************************!*\
  !*** external "require('body-parser')" ***!
  \*****************************************/
/***/ ((module) => {

module.exports = require('body-parser');

/***/ }),

/***/ "cookie-parser":
/*!*******************************************!*\
  !*** external "require('cookie-parser')" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require('cookie-parser');

/***/ }),

/***/ "express":
/*!*************************************!*\
  !*** external "require('express')" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require('express');

/***/ }),

/***/ "log4js":
/*!************************************!*\
  !*** external "require('log4js')" ***!
  \************************************/
/***/ ((module) => {

module.exports = require('log4js');

/***/ }),

/***/ "moment":
/*!************************************!*\
  !*** external "require('moment')" ***!
  \************************************/
/***/ ((module) => {

module.exports = require('moment');

/***/ }),

/***/ "mysql":
/*!***********************************!*\
  !*** external "require('mysql')" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require('mysql');

/***/ }),

/***/ "node-fetch":
/*!****************************************!*\
  !*** external "require('node-fetch')" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require('node-fetch');

/***/ }),

/***/ "path":
/*!**********************************!*\
  !*** external "require('path')" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require('path');

/***/ }),

/***/ "url":
/*!*********************************!*\
  !*** external "require('url')" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require('url');

/***/ }),

/***/ "util/util.js":
/*!******************************************!*\
  !*** external "require('util/util.js')" ***!
  \******************************************/
/***/ ((module) => {

module.exports = require('util/util.js');

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./server/index.js");
/******/ 	
/******/ })()
;